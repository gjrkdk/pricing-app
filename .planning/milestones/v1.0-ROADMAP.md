# Milestone v1.0: MVP

**Status:** SHIPPED 2026-02-06
**Phases:** 1-6
**Total Plans:** 23

## Overview

This roadmap delivers a public Shopify app enabling dimension-based pricing for headless storefronts. Phases follow the dependency chain: foundation authentication → merchant matrix management → Shopify order integration → public API → React widget → app store polish. Each phase delivers verifiable merchant or customer capabilities.

## Phases

### Phase 1: Foundation & Authentication

**Goal:** App installs securely into Shopify stores and persists merchant sessions
**Depends on:** None (foundation)
**Plans:** 3 plans

Plans:
- [x] 01-01-PLAN.md — Scaffold Remix app, Prisma schema, OAuth config, GDPR webhooks
- [x] 01-02-PLAN.md — Dashboard UI with welcome card, API key management, empty state
- [x] 01-03-PLAN.md — Database migrations, error handling, end-to-end verification

**Requirements:**
- INFRA-01: App installs via Shopify OAuth flow and persists merchant session
- INFRA-02: Embedded app uses session token authentication
- INFRA-03: GDPR webhook handlers respond to customer data requests and deletion
- INFRA-04: API key auto-generated per store on install for storefront authentication

**Success Criteria:**
1. Merchant can install the app from a development URL via Shopify OAuth
2. Merchant can access the embedded app dashboard inside Shopify admin without authentication errors
3. App generates and displays a unique API key for the merchant's store on first install
4. GDPR webhooks respond with 200 OK and log receipt

---

### Phase 2: Admin Matrix Management

**Goal:** Merchants can create, edit, and delete dimension-based price matrices through the embedded dashboard
**Depends on:** Phase 1 (requires authentication and database)
**Plans:** 5 plans

Plans:
- [x] 02-01-PLAN.md — Database schema (matrix models) and Settings page (unit preference)
- [x] 02-02-PLAN.md — Matrix list page (EmptyState/IndexTable) and create matrix page (templates)
- [x] 02-03-PLAN.md — Matrix editor with spreadsheet-style grid editing and validation
- [x] 02-04-PLAN.md — Product assignment via Shopify Resource Picker
- [x] 02-05-PLAN.md — Human verification of complete matrix management flow

**Requirements:**
- MATRIX-01 through MATRIX-06

**Success Criteria:**
1. Merchant can create a new matrix with width and height breakpoints through the dashboard
2. Merchant can set a price at each intersection and see a visual grid
3. Merchant can edit an existing matrix (add/remove breakpoints, update prices)
4. Merchant can assign a matrix to multiple products and see assignments
5. Merchant can delete a matrix with confirmation

---

### Phase 3: Draft Orders Integration

**Goal:** Calculated matrix prices create valid Shopify orders with custom locked pricing
**Depends on:** Phase 2 (requires matrix data to calculate prices)
**Plans:** 3 plans

Plans:
- [x] 03-01-PLAN.md — Price calculator service (TDD) with breakpoint lookup and dimension validation
- [x] 03-02-PLAN.md — DraftOrderRecord database schema and migration
- [x] 03-03-PLAN.md — Draft Order creation service, test flow UI, and dashboard counter

**Requirements:**
- ORDER-01: Draft Order created via Shopify GraphQL API with custom locked price

**Success Criteria:**
1. System can create a Draft Order with matrix pricing using specified width and height
2. Draft Order displays the calculated price as the line item price
3. Draft Order appears in merchant's Shopify admin with correct details
4. Draft Order converts to a real order with the locked custom price

---

### Phase 4: Public REST API

**Goal:** Headless storefronts can authenticate and retrieve dimension-based prices via REST API
**Depends on:** Phase 3 (reuses pricing and Draft Order logic)
**Plans:** 3 plans

Plans:
- [x] 04-01-PLAN.md — API auth middleware, Zod validators, rate limiting utility
- [x] 04-02-PLAN.md — Product matrix lookup service and REST endpoint resource route
- [x] 04-03-PLAN.md — Human verification of API with curl tests

**Requirements:**
- API-01 through API-04

**Success Criteria:**
1. External client can GET price with valid API key
2. API returns 401 for invalid API key
3. API returns rounded-up price for between-breakpoint dimensions
4. API returns errors for out-of-range dimensions or missing matrix

---

### Phase 5: React Widget (npm Package)

**Goal:** Merchants can add drop-in React widget to headless storefronts with dimension inputs and live pricing
**Depends on:** Phase 4 (widget calls REST API for pricing)
**Plans:** 4 plans

Plans:
- [x] 05-01-PLAN.md — Extend REST API: currency + dimension ranges, Draft Order POST endpoint
- [x] 05-02-PLAN.md — Widget scaffold: Vite library mode, package.json, TypeScript types
- [x] 05-03-PLAN.md — Widget hooks (usePriceFetch, useDraftOrder) and internal components
- [x] 05-04-PLAN.md — Main widget assembly with Shadow DOM, build verification

**Requirements:**
- WIDGET-01 through WIDGET-05

**Success Criteria:**
1. Developer can install widget via npm and render in React app
2. Price updates in real-time as customer changes dimensions
3. Add-to-cart creates Draft Order and redirects to checkout
4. Shadow DOM isolates widget styles from host page
5. Widget is publishable as npm package

---

### Phase 6: Polish & App Store Preparation

**Goal:** App meets Shopify App Store quality standards and provides merchant-friendly bulk operations
**Depends on:** Phase 5 (all core features complete)
**Plans:** 5 plans

Plans:
- [x] 06-01-PLAN.md — CSV parser service (TDD) with validation and grid inference
- [x] 06-02-PLAN.md — Shopify Billing API setup and freemium utilities
- [x] 06-03-PLAN.md — ARIA grid keyboard navigation and responsive layout
- [x] 06-04-PLAN.md — CSV import UI with preview, confirm, and freemium gate
- [x] 06-05-PLAN.md — Focus management, security review, App Store listing

**Requirements:**
- MATRIX-07: Merchant can create a matrix by uploading a CSV file

**Success Criteria:**
1. Merchant can upload CSV and create a complete matrix in one operation
2. Dashboard displays mobile-responsive UI on tablet and phone screens
3. Interactive elements meet WCAG 2.1 AA accessibility standards
4. App passes Shopify embedded app security review checklist

---

## Milestone Summary

**Key Decisions:**
- Fixed breakpoints over formulas (simpler, covers core use case) — Good
- Round-up for in-between dimensions (predictable, merchants never under-price) — Good
- Draft Orders with custom line items (Shopify ignores originalUnitPrice with variantId) — Good
- API key per store (Storefront API tokens can't authenticate custom endpoints) — Good
- One matrix per product (simple data model, use products for variants) — Good
- Remix + Polaris on Vercel (Shopify's official conventions) — Good
- Custom HTML table over Polaris DataGrid (needed full spreadsheet control) — Good
- CSS shimmer skeleton for Shadow DOM (library injection incompatible) — Good
- In-memory rate limiting (MVP choice, Redis migration path documented) — Revisit for multi-instance

**Issues Resolved:**
- Shopify originalUnitPrice ignored with variantId — used custom line items
- Unit mismatch in price calculation — breakpoints stored in display unit, no conversion
- Protected customer data access — configured in Partner Dashboard
- Vite 5.4+ host blocking — added ngrok domain to allowedHosts
- Third-party cookie issues — used session token strategy

**Technical Debt Incurred:**
- In-memory rate limiting (single-instance only, needs Redis for multi-instance)
- Widget not yet published to npm (publishable verified, manual step)
- CSV import cannot be tested in dev mode (billing gate)

---

_For current project status, see .planning/MILESTONES.md_
